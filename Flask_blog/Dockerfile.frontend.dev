# 前端开发环境Dockerfile - 支持热重载
FROM node:20-alpine

WORKDIR /app

# 安装开发工具
RUN apk add --no-cache git curl

# 复制package文件
COPY frontend/package*.json ./

# 安装依赖（包括开发依赖）
RUN npm install --legacy-peer-deps

# 设置环境变量
ENV NODE_ENV=development
ENV VITE_API_BASE=http://localhost:8000/api/v1

# 暴露端口
EXPOSE 3000 24678

# 开发服务器启动命令
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]